title: 设计模式—单例模式
author: Loux
cover: /img/post/1.jpg
tags:
  - 设计模式
  - 单例模式
categories:
  - 设计模式
date: 2018-12-30 16:25:00
---
#### 简介

单例模式属于创建型设计模式，它是最简单的设计模式之一。单例模式提供了一种创建对象的最佳方式。这种模式涉及到了一个单一的类，该类负责创建自己的对象，同时确保只有单个对象被创建。这种类对外提供了一种访问其唯一对象的方式，可以直接访问，不需要实例化对象。

由以上的描述，可以得到，单例模式因该具有以下特点：

-   单例类只能有一个实例,这个实例属于整个类

-   单例类必须创建自己的唯一实例

-   单例类必须给外部提供这一实例

**意图何在?**：保证一个类仅有一个实例，并提供一个访问它的全局访问点(public 方法)

**解决了什么问题?**：只想要在该系统中存在一个该对象实例的情况。例如一些工具类，数据库连接的方法，再比如windows中的回收站就符合单例模式。同时单例模式还避免了对象频繁的创建与销毁。

**设计思路**：判断系统中是否有这个单例对象，如果有则返回，没有则创建一个。

**关键代码**：构造函数是私有的，且获取该类实例的public方法应该是线程安全的。

**缺点**：没有接口，不能继承。违背了编程的单一设计原则——即一个类只关心内部如何实现，不关心外部如何将该类实例化。
****

#### 实现方式

1.懒汉式
```java
public class SingleTon{
  private static SingleTon instance; 
  private SingleTon(){}
  public static synchronized SingleTon getInstance(){ 
    if(instance==null){ 
    instance = new Singleton(); 
    } 
    return instance; 
  } 
 }
```
1.饿汉式

```java
public class SingleTon{
    private static SingleTon instance = new SingleTon();
    private SingleTon(){}
    public static SingleTon getInstance(){
        return instance;
    }
}
```

两者区别：
-  懒汉式是线程不安全的，在获取单例对象时必须加上synchronized关键字，但是可以延时加载该单例对象，需要时再创建，即能做到lazy loading。如果你的系统不经常使用该单例对象，推荐使用懒汉式。  

-  饿汉式由于基于classloader机制，避免了考虑多线程问题，它是线程安全的，但是当类加载时该单例对象就已经被创建，即不能做到lazy loading。如果你的系统频繁使用到单例对象，推荐使用饿汉式。
****