title: Spring 声明式事务管理
author: Loux

cover: /img/post/37.jpg

tags:

  - spring
categories:
  - Spring系列
date: 2020-03-27 14:13:00

---

本文为Spring系列的第三篇，主要介绍Spring中的事务管理。在Spring中，提供事务管理的方式有两种—编程式事务与声明式事务。

编程式事务手动进行事务的回滚操作，而声明式事务只需要在需要事务的方法上加上`@Transactional`注解，由Spring自动根据我们的方法执行的情况，对事务进行提交或回滚。这样做的好处即让事务管理变得简单，同时也避免了编程式事务侵入性强的问题（事务提交、回滚的代码并不属于业务逻辑代码）。与编程式事务相比唯一的缺点则是事务的最小粒度为方法级别，而编程式可以做到代码块级别。当然与这一个缺点比起来，显然是利大于弊的，只要我们掌握了正确的使用方式，这都不是问题。

相信听了上面对声明式事务使用的描述后，很容易将声明式事务与AOP联系起来。而实际上确实是这样，声明式事务的原理就是Spring的AOP机制。在容器启动过程中，会创建一个代理对象，程序运行中时，发现方法上标有`@Transactional`注解就会对其进行拦截，在方法执行前开启一个事务，而后根据方法是否抛出异常来决定提交事务或回滚事务。